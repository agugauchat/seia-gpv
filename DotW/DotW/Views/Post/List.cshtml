@model DotW.Models.ListPostViewModel
@{
    ViewBag.Title = "Publicaciones";
    List<Entities.CategoryEntities.Category> categories = ViewBag.Categories as List<Entities.CategoryEntities.Category>;
}

@section Styles {
    <script type="text/javascript" src="~/Content/ckeditor/ckeditor.js"></script>
    <link href="~/Content/ckeditor/ckeditor_style.css" rel="stylesheet" />
    <!-- Custom CSS -->
    <link href="~/Content/blog-post.css" rel="stylesheet">
    <!-- Code Highlight -->
    <link href="~/Content/ckeditor/plugins/codesnippet/lib/highlight/styles/monokai_sublime.css" rel="stylesheet" />
}

<div class="container">
    <div class="row">
        <!-- Blog Post Content Column -->
        <div class="col-lg-8">
            @if (Model.Posts.Any())
            {
                foreach (var post in Model.Posts)
                {
                    <h1><a href="@Url.Action("Details", "Post", new { id = post.Id })">@post.Title</a></h1>
                    <p class="lead">
                        por <a href="#">@post.WriterUserName</a>
                    </p>
                        <hr>
                        <p><span class="glyphicon glyphicon-time"></span> Fecha de publicación: @post.EffectDate.ToString("dd/MM/yyyy")</p>
                        <hr>
                        <!-- Preview Image -->
                        @*<img class="img-responsive" src="http://placehold.it/900x300" alt="">
                            <hr>*@
                    //Reemplazar por campo Summary.
                    <p class="lead">@Html.Raw(post.Body)</p>
                    <hr>
                    <br />
                }
            }
            else
            {
                <h1>No hay publicaciones asociadas a esta categoría.</h1>
            }
        </div>
        <div class="col-md-4">
            @*<div class="well">
                    <h4>Blog Search</h4>
                    <div class="input-group">
                        <input type="text" class="form-control">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button">
                                <span class="glyphicon glyphicon-search"></span>
                            </button>
                        </span>
                    </div>
                </div>*@
            <div class="well">
                <div class="row">
                    <div class="col-lg-6">
                        <h4>Categorías</h4>
                        <ul class="list-unstyled">
                            @foreach (var category in categories.OrderBy(x => x.Title))
                            {
                                <li>@Html.ActionLink(category.Title, "List", "Post", new { idCategory = category.Id }, null)</li>
                                @*<li><a href="#">@category.Title</a></li>*@
                            }
                        </ul>
                    </div>
                    <div class="col-lg-6">
                        <ul class="list-unstyled">
                            <li>@Html.ActionLink("Ver todas", "List", null, new { @class = "btn btn-success" })</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- View JavaScript -->
    <script src="~/Scripts/Post/List.js"></script>
    <!-- Code Highlight -->
    <script src="~/Content/ckeditor/plugins/codesnippet/lib/highlight/highlight.pack.js"></script>
}