@model IEnumerable<DotW.Models.ImageViewModel>

@foreach (var image in Model)
{
    <a href="#" class="returnImage" data-url="@Request.Url.GetLeftPart(UriPartial.Authority)@image.Url">
        <img src="@image.Url" alt="Hejsan" id="#image" data-source="@image.Url" width="200" height="200" />
    </a>
}
@Scripts.Render("~/bundles/jquery")
<script type="text/javascript">
    $(document).ready(function () {
        $(".returnImage").click("click", function (e) {
            var urlImage = $(this).attr("data-url");
            var urlObject = $(".cke_dialog_ui_input_text")[1];
            //jqueryObjectByClass.value = urlImage;
            //window.opener.updateValue("cke_80_textInput", urlImage);
            window.opener.updateValue(urlImage);
            //$("#cke_80_textInput").val("asd");
            window.close();
        });
        //$(".returnImage").click("click", function (e) {
        //    var urlImage = $(this).attr("data-url");

        //    var Browser = $(window.opener.document).find('a>span:contains("Browse Server")');
        //    var IUrl = Browser.parent('a').parent('td').prev('td').find('input').attr('id');

        //    var Link = Browser.parent('a').parent('td').parent('tr').prev('tr').find('input').attr('id');

        //    var $urrlLink = window.opener.document.getElementById(Link);
        //    var $urrlbody = window.opener.document.getElementById(IUrl);

        //    $($urrlbody).val(urlImage);
        //    $($urrlLink).val(urlImage);

        //    window.close();
        //});
    });


</script>